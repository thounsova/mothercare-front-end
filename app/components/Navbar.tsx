"use client";

import { useState, useEffect } from "react";
import { ChevronDown } from "lucide-react";
import Image from "next/image";

const baseURL = "https://energized-fireworks-cc618580b1.strapiapp.com"; // Strapi API URL

export default function Navbar() {
  const [language, setLanguage] = useState<"EN" | "KM">("EN");
  const [profileOpen, setProfileOpen] = useState(false);
  const [user, setUser] = useState<any>(null);

  const toggleLanguage = () => {
    

    setLanguage((prev) => (prev === "EN" ? "KM" : "EN"));
  };

  useEffect(() => {
    const fetchUser = async () => {
      try {
        const token = localStorage.getItem("token");
        if (!token) return;

        const res = await fetch(`${baseURL}/api/users/me?populate=avatar`, {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        });

        if (!res.ok) throw new Error("Failed to fetch user");

        const data = await res.json();
        setUser(data);
      } catch (err) {
        console.error("❌ Error fetching user:", err);
      }
    };

    fetchUser();
  }, []);

  // Flag icons (using flagcdn)
  const flags: Record<"EN" | "KM", string> = {
    EN: "data:image/jpeg;base64,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", // UK flag
    KM: "data:image/png;base64,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", // Cambodia flag
  };

  return (
    <nav className="w-full flex items-center justify-between px-6 py-3 bg-white shadow">
      {/* Title */}
      <h1 className="text-xl font-semibold">
        {language === "EN" ? "Dashboard" : "ផ្ទាំងគ្រប់គ្រង"}
      </h1>

      {/* Right section */}
      <div className="flex items-center gap-4">
        {/* Language switch */}
        <button
          onClick={toggleLanguage}
          className="flex items-center gap-2 px-3 py-1 rounded-lg border text-sm"
        >
          <Image
            src={flags[language]}
            alt={language}
            width={20}
            height={14}
            className="rounded-sm"
          />
          {language}
        </button>

        {/* Profile dropdown */}
        <div className="relative">
          <button
            className="flex items-center gap-2"
            onClick={() => setProfileOpen((prev) => !prev)}
          >
            <Image
              src={
                user?.avatar?.[0]?.url
                  ? user.avatar[0].url
                  : "/default-avatar.png"
              }
              alt="Profile"
              width={32}
              height={32}
              className="rounded-full"
            />
            <ChevronDown size={16} />
          </button>

          {profileOpen && (
            <div className="absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg py-2">
              <p className="px-4 py-2 text-sm text-gray-700">
                {user?.username || "Guest"}
              </p>
              <hr />
              <button className="w-full text-left px-4 py-2 text-sm hover:bg-gray-100 text-red-500">
                Logout
              </button>
            </div>
          )}
        </div>
      </div>
    </nav>
  );
}
